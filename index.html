<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ุงูุณูู ูุงูููู โ ูููุน ุดุฑูุฉ (Compat Auth)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">
  <style>
    *{font-family:'Tajawal',system-ui,Arial}
    html{scroll-behavior:smooth}
    .soft-card{box-shadow:0 10px 30px rgba(15,23,42,.08)}
    .hero-grad{background:linear-gradient(135deg,#E11D48,#FB7185)}
    .tag{position:absolute;top:.75rem;right:.75rem;background:#fff;color:#0f172a;border:1px solid #e2e8f0;border-radius:.75rem;padding:.25rem .5rem;font-size:.75rem}
    .btn{display:inline-block;padding:.7rem 1.1rem;border-radius:.9rem;border:1px solid #e2e8f0;font-weight:700}
    .btn-primary{background:#ffffff;color:#e11d48;border-color:#ffffff;box-shadow:0 8px 22px rgba(255,255,255,.15)}
    .btn-ghost{background:transparent;color:#ffffff;border-color:rgba(255,255,255,.7)}
    .thumb svg{width:100%;height:100%}
    .debug pre{white-space:pre-wrap;direction:ltr;background:#0f172a;color:#e5e7eb;border-radius:.75rem;padding:1rem;overflow:auto}
  </style>

  <!-- Firebase v9 compat (ุจุฏูู modules) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
</head>
<body class="bg-white text-slate-900">

<header class="sticky top-0 bg-white/80 backdrop-blur border-b border-slate-200 z-50">
  <nav class="max-w-7xl mx-auto px-4 py-3 flex items-center gap-6">
    <a href="#home" class="text-2xl font-extrabold text-rose-600">ุงูุณูู ูุงูููู</a>
    <div class="ml-auto flex flex-wrap gap-5">
      <a href="#home" class="hover:text-rose-600">ุงูุฑุฆูุณูุฉ</a>
      <a href="#services" class="hover:text-rose-600">ุงูุฎุฏูุงุช</a>
      <a href="#portfolio" class="hover:text-rose-600">ุงูุฃุนูุงู</a>
      <a href="#payment" class="hover:text-rose-600">ูุนูููุงุช ุงูุจูู</a>
      <a href="#web" class="hover:text-rose-600">ูุณู ุงูููุงูุน</a>
      <a href="#contact" class="hover:text-rose-600">ุชูุงุตู</a>
      <a href="#auth" class="hover:text-rose-600">ุชุณุฌูู ุงูุฏุฎูู</a>
    </div>
    <span id="navEmailPill" class="hidden ms-3 text-sm px-3 py-1 rounded-full bg-green-100 text-green-800 border border-green-300 whitespace-nowrap">
      ๐ง ุจุฑูุฏู: <span id="navEmailText" class="font-bold"></span>
    </span>
  </nav>
</header>

<section id="home" class="hero-grad text-white">
  <div class="max-w-7xl mx-auto px-4 py-16 grid md:grid-cols-2 gap-10 items-center">
    <div>
      <h1 class="text-4xl font-extrabold leading-[1.2]">ุญููู ุชุตููู ูุชูุงููุฉ ูููุญุงุช ุงุณุชุฑุดุงุฏูุฉ ุงุญุชุฑุงููุฉ</h1>
      <p class="mt-4 text-white/90 max-w-xl">ุจูุฑุงุช ูุตูุฑุ ููุงูุน ุฅููุชุฑูููุฉุ ูููุญุงุช ุทุฑู ูุฃูุงู ููุดุฑูุงุช โ ุชูููุฐ ููุนุงููุฑ ุนุงููุฉ.</p>
      <div class="mt-6 flex flex-wrap gap-3">
        <a href="#services" class="btn btn-primary">ุงุจุฏุฃ ุงูุขู</a>
        <a href="#portfolio" class="btn btn-ghost">ุดุงูุฏ ุฃุนูุงููุง</a>
      </div>
    </div>
    <div class="soft-card bg-white rounded-2xl p-4">
      <svg viewBox="0 0 920 600" class="w-full h-80 rounded-xl" xmlns="http://www.w3.org/2000/svg" aria-label="ุฃููููุงุช ููุญุงุช">
        <rect x="10" y="10" width="900" height="580" rx="28" fill="#fff"/>
        <rect x="80" y="100" width="200" height="200" rx="28" fill="#ef4444"/>
        <rect x="120" y="180" width="160" height="24" fill="#fff"/>
        <circle cx="430" cy="200" r="110" fill="none" stroke="#ef4444" stroke-width="28"/>
        <rect x="330" y="190" width="200" height="22" fill="#ef4444"/>
        <path d="M330 210 a100 100 0 0 0 200 0" fill="none" stroke="#ef4444" stroke-width="12"/>
        <polygon points="620,130 820,130 720,270" fill="#f97316"/>
        <rect x="717" y="270" width="6" height="90" fill="#6b7280"/>
        <rect x="200" y="420" width="440" height="10" fill="#94a3b8"/>
      </svg>
    </div>
  </div>
</section>

<section id="services" class="max-w-7xl mx-auto px-4 py-16">
  <h2 class="text-3xl font-extrabold mb-6">ุฎุฏูุงุชูุง</h2>
  <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
    <div class="p-6 rounded-2xl border soft-card"><h3 class="font-bold text-rose-600 mb-1">ุชุตููู ุจูุฑุงุช</h3><p class="text-slate-600">ุจูุฑุงุช ุฅุนูุงููุฉ ููุนุงุฑุถ ุจููุงุณุงุช ูุฎุงูุงุช ููุงููุฉ ููุนูุงูู ุงูุฌููุฉ.</p></div>
    <div class="p-6 rounded-2xl border soft-card"><h3 class="font-bold text-rose-600 mb-1">ุชุตููู ุตูุฑ</h3><p class="text-slate-600">ุชุญุฑูุฑ ูุฏูุฌ ุงุญุชุฑุงูู ูุฅุฎุฑุงุฌุงุช ุณูุดูุงู ููุฏูุง ูุชูุงุณูุฉ.</p></div>
    <div class="p-6 rounded-2xl border soft-card"><h3 class="font-bold text-rose-600 mb-1">ุชุตููู ููุงูุน ุฅููุชุฑูููุฉ</h3><p class="text-slate-600">ููุงูุน ูุชุฌุงูุจุฉ ูุณุฑูุนุฉ โ ูุน ููุงู ููููุน ูุฑุนู ูููุณู.</p></div>
    <div class="p-6 rounded-2xl border soft-card"><h3 class="font-bold text-rose-600 mb-1">ููุญุงุช ุงุณุชุฑุดุงุฏูุฉ ููุทุฑู ูุงูุฃูุงู</h3><p class="text-slate-600">ููุน/ุชุญุฐูุฑ/ุฅูุฒุงู ูุชุฑููุจ ููุฏุงูู ููู ุงูููุงุตูุงุช.</p></div>
  </div>
</section>

<section id="portfolio" class="bg-slate-50">
  <div class="max-w-7xl mx-auto px-4 py-16">
    <h2 class="text-3xl font-extrabold mb-6">ุฃุนูุงููุง</h2>
    <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
      <figure class="relative h-64 p-2 soft-card bg-white rounded-2xl overflow-hidden thumb">
        <span class="tag">ุชุตููู ููุงูุน</span>
        <svg viewBox="0 0 600 400" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="ุชุตููู ููุงูุน">
          <rect width="600" height="400" rx="24" fill="#0ea5e9"/>
          <rect x="60" y="70" width="480" height="260" rx="16" fill="#e2e8f0"/>
          <rect x="90" y="100" width="420" height="20" rx="10" fill="#334155"/>
          <rect x="90" y="140" width="280" height="14" rx="7" fill="#64748b"/>
          <rect x="90" y="170" width="360" height="14" rx="7" fill="#94a3b8"/>
          <rect x="90" y="200" width="300" height="14" rx="7" fill="#94a3b8"/>
          <rect x="90" y="260" width="160" height="36" rx="10" fill="#0ea5e9"/>
        </svg>
      </figure>
      <figure class="relative h-64 p-2 soft-card bg-white rounded-2xl overflow-hidden thumb">
        <span class="tag">ุชุตููู ุจูุฑุงุช</span>
        <svg viewBox="0 0 600 400" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="ุชุตููู ุจูุฑุงุช">
          <rect width="600" height="400" rx="24" fill="#22c55e"/>
          <rect x="80" y="80" width="440" height="240" rx="18" fill="#f8fafc" stroke="#0f172a" stroke-width="2"/>
          <rect x="110" y="120" width="220" height="30" rx="8" fill="#0f172a"/>
          <rect x="110" y="170" width="320" height="14" rx="7" fill="#64748b"/>
          <rect x="110" y="200" width="280" height="14" rx="7" fill="#94a3b8"/>
          <rect x="110" y="260" width="180" height="36" rx="10" fill="#22c55e"/>
        </svg>
      </figure>
      <figure class="relative h-64 p-2 soft-card bg-white rounded-2xl overflow-hidden thumb">
        <span class="tag">ุชุตููู ุตูุฑ</span>
        <svg viewBox="0 0 600 400" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="ุชุตููู ุตูุฑ">
          <rect width="600" height="400" rx="24" fill="#f59e0b"/>
          <circle cx="160" cy="160" r="60" fill="#fde68a"/>
          <rect x="250" y="110" width="280" height="180" rx="16" fill="#1f2937"/>
          <rect x="270" y="130" width="240" height="12" rx="6" fill="#f8fafc"/>
          <rect x="270" y="160" width="220" height="12" rx="6" fill="#e5e7eb"/>
          <rect x="270" y="190" width="240" height="12" rx="6" fill="#e5e7eb"/>
          <rect x="270" y="240" width="140" height="36" rx="10" fill="#f59e0b"/>
        </svg>
      </figure>
      <figure class="relative h-64 p-2 soft-card bg-white rounded-2xl overflow-hidden thumb">
        <span class="tag">ููุญุงุช ุงูุทุฑู</span>
        <svg viewBox="0 0 600 400" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="ููุญุงุช ุงูุทุฑู">
          <rect width="600" height="400" rx="24" fill="#ef4444"/>
          <rect x="160" y="70" width="280" height="180" rx="20" fill="#f8fafc"/>
          <text x="300" y="160" text-anchor="middle" font-size="60" font-weight="700" fill="#ef4444">ุชูููู</text>
          <rect x="292" y="250" width="16" height="80" fill="#334155"/>
          <rect x="180" y="350" width="240" height="10" fill="#334155"/>
        </svg>
      </figure>
    </div>
  </div>
</section>

<section id="payment" class="max-w-3xl mx-auto px-4 py-16">
  <h2 class="text-3xl font-extrabold mb-4">ูุนูููุงุช ุงูุญุณุงุจ ุงูุจููู</h2>
  <div class="p-6 rounded-2xl border soft-card bg-white space-y-4 text-sm">
    <div class="border rounded-xl p-3"><div class="text-slate-500">ุงุณู ุงูุจูู</div><div class="font-bold">ูุตุฑู ุงูุฑุงุฌุญู</div></div>
    <div class="border rounded-xl p-3"><div class="text-slate-500">ุงุณู ุงูุญุณุงุจ</div><div class="font-bold">ุดุฑูุฉ ุงูุณูู ูุงูููู</div></div>
    <div class="border rounded-xl p-3"><div class="text-slate-500">IBAN</div><div class="font-bold break-all">SA5880000375608010255740</div></div>
    <div class="border rounded-xl p-3"><div class="text-slate-500">ุฑูู ุงูุญุณุงุจ</div><div class="font-bold break-all">37500-001-0006080255740</div></div>
    <div class="border rounded-xl p-3"><div class="text-slate-500">ุงููุงุชู / ูุงุชุณุงุจ</div><div class="font-bold">0534335815</div></div>
  </div>
</section>

<section id="web" class="max-w-7xl mx-auto px-4 py-16">
  <h2 class="text-3xl font-extrabold mb-4">ูุณู ุชุตููู ุงูููุงูุน</h2>
  <p class="text-slate-600">ุฒูุงุฑุฉ ุงููููุน ุงููุฑุนู ูููุณู:</p>
  <a href="https://mkam339.github.io/mkam339-/#" target="_blank" class="inline-block mt-3 px-4 py-2 rounded-xl border hover:bg-rose-50">ุฒูุงุฑุฉ ุงููููุน ุงููุฑุนู</a>
</section>

<section id="contact" class="max-w-4xl mx-auto px-4 py-16">
  <h2 class="text-3xl font-extrabold mb-4">ุชูุงุตู ูุนูุง</h2>
  <div class="mt-3 p-4 rounded-2xl border soft-card bg-white">
    <a id="companyEmail" href="mailto:info@example.com" class="text-lg font-bold text-rose-600">info@example.com</a>
  </div>
</section>

<section id="auth" class="max-w-md mx-auto px-4 py-16">
  <h2 class="text-3xl font-extrabold mb-6 text-center">ุชุณุฌูู ุงูุฏุฎูู</h2>
  <div id="authState" class="hidden mb-4 p-3 rounded-xl border bg-green-50 text-green-700 text-sm">
    ุชู ุชุณุฌูู ุงูุฏุฎูู ูู <span id="authUserEmail" class="font-bold"></span>
  </div>
  <div class="space-y-4 border p-6 rounded-2xl soft-card">
    <input id="email" type="email" class="w-full border p-3 rounded" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู" autocomplete="username">
    <input id="password" type="password" class="w-full border p-3 rounded" placeholder="ูููุฉ ุงููุฑูุฑ" autocomplete="current-password">
    <button id="signupBtn" type="button" class="w-full px-4 py-2 border rounded">ุฅูุดุงุก ุญุณุงุจ ุจุงูุจุฑูุฏ</button>
    <button id="loginBtn" type="button" class="w-full px-4 py-2 bg-rose-600 text-white rounded">ุชุณุฌูู ุงูุฏุฎูู ุจุงูุจุฑูุฏ</button>
    <button id="googleBtn" type="button" class="w-full px-4 py-2 rounded bg-black text-white">ุชุณุฌูู ุงูุฏุฎูู ุจูุงุณุทุฉ Google</button>
    <button id="resetBtn" type="button" class="w-full px-4 py-2 underline text-sm">ูุณูุช ูููุฉ ุงููุฑูุฑุ</button>
    <button id="logoutBtn" type="button" class="hidden w-full px-4 py-2 rounded bg-slate-800 text-white">ุชุณุฌูู ุงูุฎุฑูุฌ</button>
    <p id="authMsg" class="text-center text-sm text-rose-700 min-h-[1.5rem]"></p>
    <div class="debug mt-4 space-y-2">
      <button id="diagBtn" class="px-4 py-2 border rounded">๐งช ูุญุต ุงูุงุชุตุงู ุจู Firebase</button>
      <pre id="diagOut"></pre>
    </div>
  </div>
</section>

<footer class="border-t text-center text-slate-500 p-4">ยฉ <span id="year"></span> ุงูุณูู ูุงูููู</footer>

<script>
  document.getElementById('year').textContent = new Date().getFullYear();
  document.getElementById('companyEmail').textContent = "info@example.com";
  document.getElementById('companyEmail').href = "mailto:info@example.com";

  // ููุงุชูุญ Firebase (ููุง ุฒูุฏุชูู ุจูุง)
  const firebaseConfig = {
    apiKey: "AIzaSyCpO_HmeRLjGSvNwyKTvstl6KhK0RFhtEw",
    authDomain: "alsahl-and-layn.firebaseapp.com",
    projectId: "alsahl-and-layn",
    storageBucket: "alsahl-and-layn.appspot.com",
    messagingSenderId: "25071534351",
    appId: "1:25071534351:web:0d1cdb01248cfd55b9fe7a",
    measurementId: "G-KE56Z6SC7X"
  };

  // ุชููุฆุฉ Firebase (compat)
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  auth.useDeviceLanguage();
  try { auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL); } catch(e) { console.warn(e); }

  // ุนูุงุตุฑ
  const emailEl = document.getElementById('email');
  const passEl  = document.getElementById('password');
  const msgEl   = document.getElementById('authMsg');
  const stateBox= document.getElementById('authState');
  const stateEmail = document.getElementById('authUserEmail');
  const logoutBtn  = document.getElementById('logoutBtn');
  const navPill    = document.getElementById('navEmailPill');
  const navEmail   = document.getElementById('navEmailText');
  const diagBtn    = document.getElementById('diagBtn');
  const diagOut    = document.getElementById('diagOut');

  // ุฑุณุงุฆู ุนุฑุจูุฉ
  const ERR = {
    "auth/invalid-api-key": "ููุชุงุญ Firebase ุบูุฑ ุตุญูุญ.",
    "auth/app-not-authorized": "ูุฐุง ุงูุฏูููู ุบูุฑ ูุตุฑุญ ุจู ูู Firebase (ุฃุถูู ูู Authorized domains).",
    "auth/operation-not-allowed": "ุทุฑููุฉ ุงูุฏุฎูู ุบูุฑ ููุนููุฉ ูู Firebase.",
    "auth/operation-not-supported-in-this-environment": "ูุฐู ุงูุนูููุฉ ุบูุฑ ูุฏุนููุฉ ูู ูุฐุง ุงูุณูุงู (ุบุงูุจูุง file://). ุดุบูู ุนุจุฑ http(s).",
    "auth/web-storage-unsupported": "ุงููุชุตูุญ ูููุน ุงูุชุฎุฒูู ุงููุญูู. ูุนูู ุงููCookies.",
    "auth/popup-blocked": "ุงููุชุตูุญ ููุน ุงููุงูุฐุฉ ุงูููุจุซูุฉ. ุงุณูุญ ุจุงูููุจุซูุงุช ุฃู ุณูุณุชุฎุฏู ุฅุนุงุฏุฉ ุงูุชูุฌูู.",
    "auth/popup-closed-by-user": "ุฃูุบููุช ูุงูุฐุฉ Google ูุจู ุงูุฅุชูุงู.",
    "auth/cancelled-popup-request": "ุชู ุฅูุบุงุก ุงููุงูุฐุฉ ุงูุณุงุจูุฉ. ุฌุฑูุจ ูุฌุฏุฏูุง.",
    "auth/invalid-email": "ุตูุบุฉ ุงูุจุฑูุฏ ุบูุฑ ุตุญูุญุฉ.",
    "auth/missing-email": "ุฑุฌุงุกู ุงูุชุจ ุจุฑูุฏู ุงูุฅููุชุฑููู.",
    "auth/missing-password": "ุฑุฌุงุกู ุงูุชุจ ูููุฉ ุงููุฑูุฑ.",
    "auth/weak-password": "ูููุฉ ุงููุฑูุฑ ุถุนููุฉ (6 ุฃุญุฑู ุนูู ุงูุฃูู).",
    "auth/email-already-in-use": "ูุฐุง ุงูุจุฑูุฏ ูุณุฌูู ูุณุจููุง.",
    "auth/user-not-found": "ูุง ููุฌุฏ ูุณุชุฎุฏู ุจูุฐุง ุงูุจุฑูุฏ.",
    "auth/wrong-password": "ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ.",
    "auth/too-many-requests": "ูุญุงููุงุช ูุซูุฑุฉ. ุงูุชุธุฑ ููููุงู ุซู ุญุงูู.",
    "default": "ุญุฏุซ ุฎุทุฃ ุบูุฑ ูุชููุน."
  };
  const show = (t, ok=false)=>{ msgEl.textContent=t; msgEl.className="text-center text-sm "+(ok?"text-green-700":"text-rose-700"); };

  // ุญุงูุฉ ุงููุณุชุฎุฏู
  auth.onAuthStateChanged((user)=>{
    if (user) {
      const em = user.email || "ูุณุชุฎุฏู";
      stateBox.classList.remove('hidden');
      logoutBtn.classList.remove('hidden');
      stateEmail.textContent = em;
      navPill.classList.remove('hidden');
      navEmail.textContent = em;
      show("โ ุชู ุชุณุฌูู ุงูุฏุฎูู.", true);
    } else {
      stateBox.classList.add('hidden');
      logoutBtn.classList.add('hidden');
      navPill.classList.add('hidden');
      navEmail.textContent = "";
    }
  });

  // ุฃุฒุฑุงุฑ
  document.getElementById('signupBtn').onclick = async ()=>{
    if (!emailEl.value || !passEl.value) return show("ุฑุฌุงุกู ุงูุชุจ ุจุฑูุฏู ููููุฉ ุงููุฑูุฑ.");
    try { await auth.createUserWithEmailAndPassword(emailEl.value.trim(), passEl.value); show("โ ุชู ุฅูุดุงุก ุงูุญุณุงุจ ูุชุณุฌูู ุงูุฏุฎูู.", true); }
    catch(e) { console.error(e); show(ERR[e?.code] || (ERR.default + " " + (e?.message||""))); }
  };

  document.getElementById('loginBtn').onclick = async ()=>{
    if (!emailEl.value || !passEl.value) return show("ุฑุฌุงุกู ุงูุชุจ ุจุฑูุฏู ููููุฉ ุงููุฑูุฑ.");
    try { await auth.signInWithEmailAndPassword(emailEl.value.trim(), passEl.value); show("โ ุชู ุชุณุฌูู ุงูุฏุฎูู.", true); }
    catch(e) { console.error(e); show(ERR[e?.code] || (ERR.default + " " + (e?.message||""))); }
  };

  document.getElementById('googleBtn').onclick = async ()=>{
    const provider = new firebase.auth.GoogleAuthProvider();
    try { await auth.signInWithPopup(provider); show("โ ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุงุณุทุฉ Google.", true); }
    catch(e) {
      console.warn('Popup failed, trying redirect...', e);
      if (e?.code === "auth/popup-blocked" || e?.code === "auth/operation-not-supported-in-this-environment") {
        try { await auth.signInWithRedirect(provider); }
        catch(e2) { console.error(e2); show(ERR[e2?.code] || (ERR.default + " " + (e2?.message||""))); }
      } else {
        show(ERR[e?.code] || (ERR.default + " " + (e?.message||"")));
      }
    }
  };

  document.getElementById('resetBtn').onclick = async ()=>{
    if (!emailEl.value) return show("ุฑุฌุงุกู ุงูุชุจ ุจุฑูุฏู ุงูุฅููุชุฑููู.");
    try { await auth.sendPasswordResetEmail(emailEl.value.trim()); show("๐ง ุฅุฐุง ูุงู ุงูุจุฑูุฏ ูุณุฌูููุง ุณุชุตูู ุฑุณุงูุฉ ูุฑูุจูุง.", true); }
    catch(e) { console.error(e); show(ERR[e?.code] || (ERR.default + " " + (e?.message||""))); }
  };

  logoutBtn.onclick = async ()=>{
    try { await auth.signOut(); show("ุชู ุชุณุฌูู ุงูุฎุฑูุฌ.", true); }
    catch(e) { console.error(e); show(ERR[e?.code] || (ERR.default + " " + (e?.message||""))); }
  };

  // ูุญุต ุณุฑูุน
  document.getElementById('diagBtn').onclick = ()=>{
    const data = {
      location: location.href,
      protocol: location.protocol,
      authorizedHint: "ุฃุถู ุงูุฏูููู ุงูุญุงูู ูู Firebase โ Authentication โ Settings โ Authorized domains",
      configProjectId: firebase.app().options.projectId,
      cookiesEnabled: navigator.cookieEnabled,
      user: auth.currentUser ? { email: auth.currentUser.email, uid: auth.currentUser.uid } : null,
      userAgent: navigator.userAgent
    };
    document.getElementById('diagOut').textContent = JSON.stringify(data, null, 2);
  };
</script>

</body>
</html>
